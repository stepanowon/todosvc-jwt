# ğŸ” TodoSvc-JWT

JWT ì¸ì¦ì„ ì ìš©í•œ í• ì¼ ê´€ë¦¬ REST API ì„œë¹„ìŠ¤

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-4.21.2-blue.svg)](https://expressjs.com/)
[![JWT](https://img.shields.io/badge/JWT-9.0.2-orange.svg)](https://jwt.io/)
[![License](https://img.shields.io/badge/License-ISC-yellow.svg)](LICENSE)

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#-ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [ì¸ì¦ ì‹œìŠ¤í…œ](#-ì¸ì¦-ì‹œìŠ¤í…œ)
- [í™˜ê²½ ë³€ìˆ˜](#-í™˜ê²½-ë³€ìˆ˜)
- [ê°œë°œì ê°€ì´ë“œ](#-ê°œë°œì-ê°€ì´ë“œ)
- [ë°°í¬](#-ë°°í¬)
- [ê¸°ì—¬í•˜ê¸°](#-ê¸°ì—¬í•˜ê¸°)
- [ë¼ì´ì„ ìŠ¤](#-ë¼ì´ì„ ìŠ¤)

## ğŸš€ í”„ë¡œì íŠ¸ ì†Œê°œ

TodoSvc-JWTëŠ” JWT(JSON Web Token) ì¸ì¦ì„ êµ¬í˜„í•œ í• ì¼ ê´€ë¦¬ REST API ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì‚¬ìš©ì ë“±ë¡, ë¡œê·¸ì¸, í† í° ê¸°ë°˜ ì¸ì¦, í• ì¼ CRUD ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### âœ¨ ì£¼ìš” íŠ¹ì§•

- **JWT ê¸°ë°˜ ì¸ì¦**: Access Token + Refresh Token êµ¬ì¡°
- **RESTful API**: í‘œì¤€ REST API ì„¤ê³„
- **ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤**: LokiJSë¥¼ í™œìš©í•œ ë¹ ë¥¸ ë°ì´í„° ì²˜ë¦¬
- **CORS ì§€ì›**: í¬ë¡œìŠ¤ ì˜¤ë¦¬ì§„ ìš”ì²­ ì²˜ë¦¬
- **ë¡œê¹… ì‹œìŠ¤í…œ**: ì ‘ê·¼ ë¡œê·¸ ìë™ ë¡œí…Œì´ì…˜
- **ì›¹ ì¸í„°í˜ì´ìŠ¤**: API í…ŒìŠ¤íŠ¸ìš© ì›¹ í˜ì´ì§€ ì œê³µ

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ğŸ‘¤ ì‚¬ìš©ì ê´€ë¦¬
- ì‚¬ìš©ì ë“±ë¡ (íšŒì›ê°€ì…)
- ë¡œê·¸ì¸ / ë¡œê·¸ì•„ì›ƒ
- JWT í† í° ê°±ì‹ 

### ğŸ“ í• ì¼ ê´€ë¦¬
- í• ì¼ ëª©ë¡ ì¡°íšŒ
- í• ì¼ ì¶”ê°€
- í• ì¼ ì‚­ì œ

### ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥
- JWT ê¸°ë°˜ ì¸ì¦
- HMAC SHA-256 íŒ¨ìŠ¤ì›Œë“œ í•´ì‹œ
- CORS ì •ì±… ì ìš©
- ìºì‹œ ë°©ì§€ í—¤ë” ì„¤ì •

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Node.js** 18+
- **Express.js** 4.21.2
- **JSON Web Token** 9.0.2
- **LokiJS** 1.5.12 (ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤)

### Frontend
- **EJS** 3.1.10 (í…œí”Œë¦¿ ì—”ì§„)
- **Bootstrap** 3.x
- **jQuery**
- **Font Awesome**

### Development
- **Babel** 7.26.0 (ES6+ íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬)
- **Nodemon** 3.1.7 (ê°œë°œ ì„œë²„)

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
todosvc-jwt/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js      # ë©”ì¸ ì„œë²„ ì„¤ì •
â”‚   â”œâ”€â”€ routes.js     # API ë¼ìš°íŠ¸ ì •ì˜
â”‚   â”œâ”€â”€ authutil.js   # JWT ì¸ì¦ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ tododao.js    # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”œâ”€â”€ views/
â”‚   â””â”€â”€ index.ejs     # ë©”ì¸ ì›¹ í˜ì´ì§€
â”œâ”€â”€ public/           # ì •ì  íŒŒì¼ (CSS, JS, ì´ë¯¸ì§€)
â”œâ”€â”€ log/              # ì ‘ê·¼ ë¡œê·¸ íŒŒì¼
â”œâ”€â”€ build/            # ë¹Œë“œëœ íŒŒì¼ (Babel ì»´íŒŒì¼)
â”œâ”€â”€ package.json      # í”„ë¡œì íŠ¸ ì˜ì¡´ì„±
â”œâ”€â”€ babel.config.json # Babel ì„¤ì •
â””â”€â”€ README.md         # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository-url>
cd todosvc-jwt
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
# ê°œë°œ ëª¨ë“œ (nodemon + babel-node)
npm run start-dev

# ë˜ëŠ” í”„ë¡œë•ì…˜ ëª¨ë“œ
npm run build
npm start
```

### 4. ì„œë²„ ì ‘ì†
ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000` ì ‘ì†

## ğŸ“š API ë¬¸ì„œ

### Base URL
```
http://localhost:3000
```

### ğŸ”“ ì¸ì¦ ë¶ˆí•„ìš” API

#### 1. ë©”ì¸ í˜ì´ì§€
```http
GET /
```

#### 2. ì‚¬ìš©ì ë“±ë¡
```http
POST /users/create
Content-Type: application/json

{
  "userid": "testuser",
  "username": "í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì",
  "password": "1234"
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "status": "success",
  "message": "ì‚¬ìš©ì ë“±ë¡ ì„±ê³µ!"
}
```

#### 3. ë¡œê·¸ì¸
```http
POST /login
Content-Type: application/json

{
  "userid": "testuser",
  "password": "1234"
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "status": "success",
  "message": "ë¡œê·¸ì¸ ì„±ê³µ",
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

#### 4. í† í° ê°±ì‹ 
```http
POST /token
Content-Type: application/json

{
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### ğŸ” ì¸ì¦ í•„ìš” API
ëª¨ë“  í• ì¼ ê´€ë¦¬ APIëŠ” Authorization í—¤ë”ê°€ í•„ìš”í•©ë‹ˆë‹¤.

```http
Authorization: Bearer <access_token>
```

#### 1. í• ì¼ ëª©ë¡ ì¡°íšŒ
```http
GET /todolist
Authorization: Bearer <access_token>
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "status": "success",
  "todoList": [
    {
      "userid": "testuser",
      "id": 1704107120576,
      "todo": "ë¦¬ì•¡íŠ¸ í•™ìŠµ",
      "desc": "ë¦¬ì•¡íŠ¸ í•™ìŠµì„ í•´ì•¼ í•©ë‹ˆë‹¤"
    }
  ]
}
```

#### 2. í• ì¼ ì¶”ê°€
```http
POST /todolist
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "todo": "ìƒˆë¡œìš´ í• ì¼",
  "desc": "í• ì¼ì— ëŒ€í•œ ì„¤ëª…"
}
```

#### 3. í• ì¼ ì‚­ì œ
```http
DELETE /todolist/:id
Authorization: Bearer <access_token>
```

## ğŸ”’ ì¸ì¦ ì‹œìŠ¤í…œ

### JWT í† í° êµ¬ì¡°
- **Access Token**: 1ì‹œê°„ ë§Œë£Œ, API ì ‘ê·¼ìš©
- **Refresh Token**: 7ì¼ ë§Œë£Œ, í† í° ê°±ì‹ ìš©

### í† í° í˜ì´ë¡œë“œ ì˜ˆì‹œ
```json
{
  "userid": "testuser",
  "role": "users",
  "iss": "jwt test server",
  "iat": 1640995200,
  "exp": 1641598000
}
```

### ê¸°ë³¸ ì‚¬ìš©ì ê³„ì •
| ì‚¬ìš©ì ID | ë¹„ë°€ë²ˆí˜¸ | ì—­í•  | ì„¤ëª… |
|-----------|----------|------|------|
| `admin` | `1234` | `admins` | ê´€ë¦¬ì |
| `gdhong` | `1234` | `users` | ì¼ë°˜ ì‚¬ìš©ì |
| `mrlee` | `1234` | `users` | ì¼ë°˜ ì‚¬ìš©ì |

## ğŸŒ í™˜ê²½ ë³€ìˆ˜

### `.env` íŒŒì¼ ìƒì„±
```bash
# JWT ì‹œí¬ë¦¿ í‚¤ (í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°˜ë“œì‹œ ë³€ê²½)
JWT_SECRET_KEY=your-super-secret-key-here

# ì„œë²„ í¬íŠ¸
PORT=3000

# CORS í—ˆìš© ë„ë©”ì¸
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
```

## ğŸ‘¨â€ğŸ’» ê°œë°œì ê°€ì´ë“œ

### ê°œë°œ í™˜ê²½ ì„¤ì •
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹œì‘ (ìë™ ì¬ì‹œì‘)
npm run start-dev

# ë¹Œë“œ (í”„ë¡œë•ì…˜ìš©)
npm run build

# ë¹Œë“œëœ íŒŒì¼ ì‹¤í–‰
npm start
```

### ë¹Œë“œ ëª…ë ¹ì–´
- `npm run clean`: ë¹Œë“œ í´ë” ì •ë¦¬
- `npm run build-babel`: Babel íŠ¸ëœìŠ¤íŒŒì¼
- `npm run build`: ì „ì²´ ë¹Œë“œ (clean + build-babel)

### ì½”ë“œ ìŠ¤íƒ€ì¼
- ES6+ ë¬¸ë²• ì‚¬ìš© (Babel íŠ¸ëœìŠ¤íŒŒì¼)
- ëª¨ë“ˆí™”ëœ êµ¬ì¡° (ë¼ìš°íŠ¸, ì¸ì¦, DAO ë¶„ë¦¬)
- ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

## ğŸš€ ë°°í¬

### Vercel ë°°í¬
```bash
# Vercel CLI ì„¤ì¹˜
npm install -g vercel

# ë°°í¬
vercel
```

### Docker ë°°í¬ (ì„ íƒì‚¬í•­)
```dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

EXPOSE 3000
CMD ["npm", "start"]
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. í¬í¬ (Fork) ìƒì„±
2. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëœì¹˜ì— í‘¸ì‹œ (`git push origin feature/amazing-feature`)
5. Pull Request ìƒì„±

## ğŸ“ ë¼ì´ì„ ìŠ¤  
MIT License  

